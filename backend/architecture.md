## MQ

处理瓶颈：

- 生产者：确认超时时间、重试机制、异步线程池
- 消费者：发现、解决



查看积压阈值

- 短期方案：增大线程数，增加服务器
- 长期需要优化逻辑



## 缓存

对缓存的写入成功和数据存在性都不能强依赖，缓存读取不成功就需要再次查DB，必须异常捕获，数据异步线程池写入

冷启动：数据从磁盘加载

热启动：数据从内存加载



## 超时和重试

超时时间 = 一个请求处理99.9%的耗时的5到10倍

考虑跨机房等网络耗时



## 服务隔离

为了减少损失的影响范围，避免雪崩效应

部署相同的代码但部署在不同的机器群



## 数据库

- 一个数据表的数据过多，对更新和查询性能都有影响

- 不再使用的数据及时备份清走

- 数据库容量剩余不到60%, 考虑分库分表

- 一台物理机写入能力不能高于QPS1500

- 主从延时不是很敏感的业务场景，做好读写分离

- 杜绝慢查询



## 依赖

梳理好系统的边界和定位

调用系统的调用方需要什么东西，我们是应该给提供，还是让他们自己去解决









































